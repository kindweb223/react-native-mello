<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>CKEditor</title>
    <script src="https://cdn.ckeditor.com/ckeditor5/12.0.0/decoupled-document/ckeditor.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
</head>

<style>
  body {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  }
</style>

<body>
<div name="content" id="editor"></div>
<script>
  document.addEventListener("message", function(event) {
    if (event.data.includes('placeholder: ')) {
      // Show inital content
      content = event.data.split('placeholder: ')[1];
      CKEditor.setData(content);
    } else {
      // Execute editor commands
      content = event.data.split('execute: ')[1];
      CKEditor.execute(content);
    }
  })

  DecoupledEditor
    .create(document.querySelector('#editor'), {
      placeholder: 'Type text or paste a link',
      focus: true
    })
    .then(editor => {
      window.CKEditor = editor;

      editor.model.document.on( 'change', function() {
        window.postMessage(editor.getData(), '*')
      });
    })
    .catch(error => {
      console.error(error);
    });
</script>
</body>

</html>
