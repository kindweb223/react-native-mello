<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>CKEditor</title>
    <script src="https://cdn.ckeditor.com/ckeditor5/12.0.0/decoupled-document/ckeditor.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta name="viewport" content="width=device-width,initial-scale=1">
</head>

<style>
  body {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    background-color: #f00;
  }
  .ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable), .ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners {
    outline: none;
    border: 1px solid transparent;
    box-shadow: none;
  }
  .ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable), .ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners:focus {
      outline: none;
      border: 1px solid transparent;
      box-shadow: none;
  }
  .ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable), .ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners:active {
      outline: none;
      border: 1px solid transparent;
      box-shadow: none;
  }
</style>

<body>
<div name="content" id="editor"></div>
<script>
  window.addEventListener("message", function(event) {
    if (event.data.includes('placeholder: ')) {
      // Show inital content
      content = event.data.split('placeholder: ')[1];
      CKEditor.setData(content);
    } else {
      // Execute editor commands
      content = event.data.split('execute: ')[1];
      if (content === 'fontSize_small') {
        CKEditor.execute('fontSize', { value: 'small' });
      } else if (content === 'fontSize_normal') {
        CKEditor.execute('fontSize', { value: 'normal' });
      } else {
        CKEditor.execute(content);
      }
    }
  })

  DecoupledEditor
    .create(document.querySelector('#editor'), {
      placeholder: "Let your ideas flow. Type text, paste a link, add an image, video or audio",
      focus: true
    })
    .then(editor => {
      window.CKEditor = editor;

      editor.model.document.on( 'change', function() {
        window.postMessage(editor.getData(), '*')
        // window.ReactNativeWebView.postMessage(editor.getData());
      });
    })
    .catch(error => {
      console.error(error);
    });
</script>
</body>

</html>
